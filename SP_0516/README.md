
### 🔄 프로세스 간 데이터 교환
#### 방법
- 한 프로세스가 파일에 쓴 내용을 다른 프로세스가 읽음
#### ⚠️문제점 (동기화 안 될 때)
- 한 프로세스가 파일의 내용을 수정하는 동안, 다른 프로세스가 그 파일을 읽는 경우
- 두 프로세스가 동시에 하나의 파일에 접근해 데이터를 쓰는 경우
#### 🔐해결 방법
- **Lock(잠금)**을 통해 데이터 충돌 방지

---
## 🔒lock(잠금)
- 한 프로세스가 읽거나 수정할 때 다른 프로세스의 접근을 제한함
- 잠금된 영역에 대해 한 번에 하나의 프로세스만 접근 허용



---
## 📁C언어의 파일 입출력 과정
- ① 파일 열기 - `fopen()`
- ② 파일 입출력 - 다양한 파일 입출력 함수 사용
예시: fprintf(), fscanf(), fgets(), fputs(), fread(), fwrite() 등
- ③ 파일 닫기 - `fclose()`

### 파일 열기 - `fopen()`
- 파일 열기를 하면 해당 **파일의 구조체에 대한 포인터**가 리턴됨
	- 파일 포인터(`FILE *`)는 열린 파일을 나타냄(가리킴)
```c
FILE *fopen(const char *filename, const char *mode);
```
- `*filename`: 파일 명에 대한 포인터
- `*mode`: 파일을 여는 방식


### 파일 닫기
- 사용을 마친 파일을 닫기
```c
int fclose(FILE *fp);
```



---
## 프로세스(process)
- 실행 중인 프로그램
- 프로세스마다 유일한 번호인 **PID**를 부여 받음
	- `ps` 명령어로 확인 가능

### `ps` - 프로세스 상태 출력
- 현재 존재하는 프로세스들의 실행 상태를 요약해서 출력

- PID는 운영체제가 부여함
- 동일한 명령(프로그램)임에도 실행 마다 PID가 달라진 모습

### `sleep`
- 지정된 시간만큼 실행을 중지시킴
- `sleep 초단위시간`


### `kill`
- 현재 실행중인 프로세스를 강제로 종료
- `kill [-시그널] 프로세스번호`


### `wait`
- 해당 프로세스 번호를 갖는, 자식 프로세스가 종료될 때까지 기다림
- 프로세스 번호를 지정하지 않으면, 모든 자식 프로세스를 기다림

## C 프로그램의 시작 및 종료

### 프로그램 실행 시작
- #### exec 시스템 호출
	- C시작 루틴에게 명령줄 인수와 환경 변수를 전달함함
	- 프로그램을 실행시킴
- #### C 시작 루틴(C start-up routine)
	- main 함수를 호출함
		- 명령줄 인수, 환경 변수를 전달함
	- 실행이 끝나면 반환값을 받아 exit 함
- #### `main()` 함수 호출
### 프로그램 종료
- #### `exit()`
	- 뒷정리를 한 후 프로세스를 정상적으로 종료시킴
		- 모든 열려진 스트림을 닫음(fclose)
		- 출력 버퍼의 내용을 디스크에 기록함(fflush)
		- 종료 코드(exit code)를 부모 프로세스에게 전달
	- exit handler 들을 등록된 역순으로 호출함
- #### `_exit()`
	- 뒷정리를 하지 않고 프로세스를 즉시 종료시킴
- #### exit 처리기(exit handler) 등록
	- 프로세스당 32개까지 등록
	- `exit()`에 의한 프로세스 종료 과정에서 자동으로 수행됨

---